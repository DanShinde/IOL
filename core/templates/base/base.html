<!DOCTYPE html>
<html>
<head>
    <title>{% block title %}My App{% endblock %}</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.1.3/dist/css/bootstrap.min.css" integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO" crossorigin="anonymous">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
    {% load static %}
    <link rel="stylesheet" type="text/css" href="{% static 'myfirst.css' %}">
    {% block styles %}
    {% endblock %}
</head>
<body>


        <ul class="nav nav-pills nav-fill gap-2 p-1 small bg-primary rounded-5 shadow-sm" id="pillNav2" role="tablist" style="--bs-nav-link-color: var(--bs-white); --bs-nav-pills-link-active-color: var(--bs-primary); --bs-nav-pills-link-active-bg: var(--bs-white);">
            <li class="nav-item" role="presentation">
              <button class="nav-link active rounded-5 navbtns" id="create-tab" data-bs-toggle="tab" type="button" role="tab" aria-selected="true"  onclick="location.href='{% url 'create_project' %}'">Create Project               
              </button>
            </li>
            <li class="nav-item" role="presentation">
              <button class="nav-link active rounded-5 navbtns" id="list-tab" data-bs-toggle="tab" type="button" role="tab" aria-selected="false" onclick= "location.href='{% url 'project_list' %}'">View Projects</button>
            </li>

            <li class="nav-item" role="presentation">
              <button class="nav-link active rounded-5 navbtns" id="addmodule-tab" data-bs-toggle="tab" type="button" role="tab" aria-selected="false" onclick= "location.href='{% url 'module_list' %}'">Add or Edit Module</button>
            </li>
            {% if request.user.is_authenticated %}
            <li class="nav-item" role="presentation">
              <p class= "nav-link active rounded-5 navbtns">Welcome, {{ request.user.first_name }}!</p>
              </li>
            <li class="nav-item" role="presentation">
              <button class="nav-link active rounded-5 navbtns" id="addmodule-tab" data-bs-toggle="tab" type="button" role="tab" aria-selected="false" onclick="window.location.href='/accounts/logout';">Logout</button>
            </li>
            {% else %}
            <li class="nav-item" role="presentation">
              <button class="nav-link active rounded-5 navbtns" id="addmodule-tab" data-bs-toggle="tab" type="button" role="tab" aria-selected="false" onclick="window.location.href='/accounts/login';">Login</button>
            </li>
            {% endif %}

          </ul>

        {% block content %}
        {% endblock %}
<script>
  function setActiveNavButton() {
    // Get all the buttons with class "nav-link" inside the element with id "nav-pills"
    var buttons = document.querySelectorAll(".nav-link");
    // Get the path of the current URL
    var path = window.location.pathname;
    
    // Loop through all the buttons
    for (var i = 0; i < buttons.length; i++) {
      // Get the href attribute of the button
      var href = buttons[i].getAttribute("onclick");
      {% comment %} console.log(window.location.href); {% endcomment %}
      // Check if the href attribute matches the current path
    if (href.includes(path)) {
        // If it is, add the "active" class to the button
        buttons[i].classList.add("active");
      } else {
        // If it's not, remove the "active" class from the button
        buttons[i].classList.remove("active");
      }
    }
  }
  


  window.onload = function() {
    setActiveNavButton();
  };
  
</script>
    </main>
</body>
</html>
